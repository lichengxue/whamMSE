% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/update_em_with_basic_info.R
\name{update_em_with_basic_info}
\alias{update_em_with_basic_info}
\title{Update Estimation Model Inputs with Aggregated Data}
\usage{
update_em_with_basic_info(
  om,
  em_info,
  aggregate_catch_info,
  aggregate_index_info,
  ind_em
)
}
\arguments{
\item{om}{List. An operating model containing observed data (`agg_catch`, `agg_indices`).}

\item{em_info}{List. The estimation model information containing:
\itemize{
  \item `par_inputs` - Model parameters including fleet and index configurations.
  \item `user_waa` - Weight-at-age information for fleets, indices, and stocks.
}}

\item{aggregate_catch_info}{List. Aggregated fleet catch data:
\itemize{
  \item `fleet_pointer` - Vector mapping original fleets to aggregated fleets (`0` = exclude).
  \item `agg_catch` - Aggregated catch values per fleet.
  \item `catch_cv`, `catch_Neff`, `use_agg_catch`, `use_catch_paa`
}}

\item{aggregate_index_info}{List. Aggregated survey index data:
\itemize{
  \item `index_pointer` - Vector mapping original indices to aggregated indices (`0` = exclude).
  \item `agg_indices` - Aggregated index values.
  \item `index_cv`, `index_Neff`, `fracyr_indices`, `q`, `use_indices`, `use_index_paa`
}}

\item{ind_em}{Vector. Indices specifying the years for the estimation model.}
}
\value{
List. Updated `em_info` with:
  \itemize{
    \item `par_inputs` - Adjusted estimation model parameters reflecting the new structure.
    \item `user_waa` - Updated weight-at-age (`n_fleets + n_regions + n_indices + n_stocks, n_ages`).
    \item `basic_info$waa` - Normalized weight-at-age data ensuring proper scaling.
  }
}
\description{
Updates the estimation model (`em_info`) by incorporating aggregated data
from `aggregate_catch_info` and `aggregate_index_info`. This function adjusts
`par_inputs` and weight-at-age (`user_waa`) to match the new fleet, region,
index, and stock structure while handling fleet/index exclusions (`fleet_pointer == 0`).
}
\examples{
\dontrun{
updated_em_info <- update_em_with_basic_info(
  om = some_operating_model,
  em_info = some_em_info,
  aggregate_catch_info = list(fleet_pointer = c(1, 1, 2, 0), agg_catch = matrix(runif(40), 10, 4)),
  aggregate_index_info = list(index_pointer = c(1, 2, 0), agg_indices = matrix(runif(30), 10, 3)),
  ind_em = 1:10
)
}

}
